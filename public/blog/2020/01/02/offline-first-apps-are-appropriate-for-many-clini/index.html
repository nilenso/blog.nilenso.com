
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Offline-first apps are appropriate for many clinical environments - Nilenso Blog</title>
  <meta name="author" content="Nilenso">

  
  <meta name="description" content="

  
  
  
    
      Offline-first apps are appropriate for many clinical environments
    
  
    
      
        










        
      
    ...">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>

  
  <link rel="canonical" href="https://medium.com/simple-dot-org/offline-first-apps-are-appropriate-for-many-clinical-environments-cddf5a73bb61?source=rss-eca2adc9cc56------2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Nilenso Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>

  <!-- Typekit fonts -->
  <script type="text/javascript" src="//use.typekit.net/xgt4lgm.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43704022-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner">
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  
</ul>
  
<header class="nilenso-header">
  <img class="header-logo-image left" src="/images/nilenso-200.png" />
  <a class="header-link logo-name" href="http://nilenso.com">nilenso</a>
  <a class="header-link right page-link rss-link" href="/atom.xml" title="subscribe via RSS"><img class="rss-link-image" src="/images/rss.png"></img></a>
  <a class="header-link page-link" href="/blog/archives">Archive</a>
  <a class="header-link page-link active" href="/">Blog</a>
</header>
<div class="clear"></div>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
  
    
      <h1 class="entry-title">Offline-first apps are appropriate for many clinical environments</h1>
    
  
    
      <p class="meta">
        









<time datetime="2020-01-02T00:00:00+05:30" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


<div class="entry-content"><p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*UiW-BI_lk5F-h9jpCs8y0w.jpeg" /><figcaption>A nurse using the offline-first <a href="http://simple.org">Simple</a> app in rural Punjab</figcaption></figure><h4>With an offline-first approach, apps like Simple are always snappy and responsive, so clinicians are never waiting while they treat patients.</h4><p>Let me set the scene. A nurse named Ravdeep works in a busy clinic in a rural hospital in India. Patients are lined up outside her door in a chaotic line all of the way down the hall. Ravdeep is responsible for taking blood pressures and blood sugar measures for each patient. She quickly enters their data into the <a href="http://simple.org">Simple</a> app on her tablet, and sends them to the doctor if they appear to be hypertensive or diabetic.</p><p>This public hospital isn’t fancy, but you might be surprised to know that Ravdeep’s clinic has excellent 4G internet. In fact, much of India is covered with strong, affordable mobile networks. So, why would we choose to make an app like <a href="http://simple.org">Simple</a> using an offline-first approach?</p><p>Offline-first has several upsides, but the primary benefit is that the app is <em>always</em> snappy and responsive, so clinicians aren’t waiting for their app to talk to the cloud during patient interactions. In a busy clinic like Ravdeep’s, this is a crucial feature. In countries like India, Bangladesh, or Ethiopia where a patient encounter is often less than 5 minutes, every second counts and therefore every call to the server matters.</p><p>The big secondary benefit is that the app will work in the corners of India with limited internet. In a country as diverse as India, this is crucial.</p><h3>What is offline-first?</h3><p>A typical clinical app is in constant contact with a remote server, so each time patient data is updated it gets saved on the server. Designing an app offline-first is different because that data is saved locally on-device and is later “synced” or saved to a remote server. That means that the app will always be able to function with or without online internet. But, it also means that you need two databases with one on the device itself and one on the server and they must be kept in sync.</p><h3>Pros</h3><ul><li><strong>Works fast every time. </strong>Every second counts in a healthcare facility. Offline-first software is incredibly snappy. For us, this is the #1 benefit to going offline-first.</li><li><strong>Works offline. </strong>The most obvious benefit of offline-first is that the app works when internet connectivity is low or really spotty. This gives Simple the flexibility to work in places where internet access is intermittent.</li><li><strong>Works on a wide range of devices. </strong>The Android app is being used in public health facilities by users on their own personal devices. Having the ability to adjust how often we push and pull data allows us to optimize resources like battery, network usage, device storage, etc.</li><li><strong>App continues to work without a central server.</strong> A user can continue using a fully-functional app without syncing with a central server if they wish to do so. This lets small private practitioners track the health of their patients without sharing their data, if they wish to do so.</li><li><strong>Minimises the loss of data. </strong>Data is never lost even if our servers are unavailable. This gives us some breathing room during maintenance and upgrades.</li></ul><h3>Challenges</h3><ul><li><strong>Sync is really hard. </strong>We constantly run into challenges with syncing. If the app doesn’t sync regularly enough to the server, nurses get confused and frustrated. But if we sync data too aggressively we can drain the nurse’s battery. Striking the right balance is tricky.</li><li><strong>Doubles some of the work.</strong> As you can imagine, having two complete databases means a lot of back-end and front-end coordination and duplication of effort.</li><li><strong>Multiple users in one facility.</strong> Inconsistent sync is a problem for one healthcare worker, but in team-based care it is even more problematic. The local database on each of the nurses’ phones is not consistent, and this can lead to confusion where one nurse will often see a different (more recently updated) view of the data.</li><li><strong>Deleting data and resolving conflicts. </strong>With multiple users, it’s very possible to end up with data conflicts that must be resolved. For instance, one user edits a patient record but before she syncs data another user edits the same data on their device. It’s possible to resolve conflicts, but this adds to the complexity of the software.</li><li><strong>Maintaining backwards compatibility.</strong> Making changes to the API can be very difficult. The API needs to work across many versions of the app, each of which have a slightly different understanding of how data is structured.</li></ul><h3>What we learned so far</h3><p>The Simple app is being used in over 400 hospitals in India to manage over 190,000 patients with hypertension. We are constantly learning. Here are a few lessons we learned so far:</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*QuvkfO-FTqcpciUacmO8IA.jpeg" /><figcaption>Physical BP Passports — the QR code contains a UUID</figcaption></figure><p><strong>UUIDs are your friends </strong><br>Since the records are created on the mobile app and synced to server, we need an identifier that is easy to generate and is unique across all the devices. This makes <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUIDs</a> an ideal choice for our primary keys.</p><ul><li>We also use UUIDs in our <a href="https://docs.simple.org/design-1/design">BP Passports</a> (temporary identity cards issued to patients to easily find them in future visits). This allows us to print these cards from any location without fear of duplication.</li><li>The spec for UUID v3 allows us to deterministically generate new UUIDs based on a hash. Using this version, we can easily integrate data from external systems without having to maintain references in either of the databases.</li></ul><p><strong>Tracking time is really important<br></strong>In an offline first app, the changes made by a user may not be reflected on the server for a long time, which results in old changes overwriting newer ones. To prevent this, we track when the change was made on the mobile app and the time when the change was seen by the server. With both times we can determine and keep the relevant changes. This is also known as bi-temporal modelling and this blog <a href="https://juxt.pro/blog/posts/value-of-bitemporality.html">post</a> provides a nice introduction to the concept.</p><p><strong>Limit what data gets synced<br></strong>When we started, every time a user registered with Simple we would sync all of the data from the server starting from the earliest record. This worked fine when we only had a few facilities, but as the number of patients in the database grew, we started facing two problems:</p><ol><li>The user would have to download the entire dataset, a large part of which was irrelevant to the user. It is uncommon that a patient visits facilities in two different districts.</li><li>Syncing from the earliest record first would result in users waiting for an unknown amount of time to get all the patients in their facility.</li></ol><p>To improve the user experience we now sync data only for facilities within their district and we sync data for the user’s own facility first. This reduces the initial load and lets the clinician to start recording her patients quickly.</p><h3>Is offline-first worth the added effort?</h3><p>Going offline-first was one of the best decisions we made in our technical architecture. When we watch a nurse in a busy outpatient department, it’s apparent how crucial performance is to her day. We have seen clinicians treating up to 200 patients in a single day — every extra second in a patient interaction at that velocity multiplies quickly.</p><p>Committing to offline-first also has opened up more deployment opportunities for Simple. In the next few months we will deploy to several locations where internet access is inconsistent. When our government partners asked if we could handle these environments, we could confidently say “yes!”</p><p><a href="http://simple.org">Simple</a> is a free, open source, project through <a href="http://resolvetosavelives.org">Resolve to Save Lives</a>. If you are working on similar software and you have questions about our offline first approach, look at our code and documentation and <a href="https://www.resolvetosavelives.org/contact/">get in touch</a> with us. We’ll be happy to chat with you and explain in more detail what we’re doing. Thanks!</p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=cddf5a73bb61" width="1" height="1"><hr><p><a href="https://medium.com/simple-dot-org/offline-first-apps-are-appropriate-for-many-clinical-environments-cddf5a73bb61">Offline-first apps are appropriate for many clinical environments</a> was originally published in <a href="https://medium.com/simple-dot-org">Simple</a> on Medium, where people are continuing the conversation by highlighting and responding to this story.</p><div class="author">
  <img src="https://nilenso.com/images/people/govind-200.png" style="width: 96px; height: 96;">
  <span style="position: absolute; padding: 32px 15px;">
    <i>Original post by <a href="http://twitter.com/govindkrjoshi">Govind Krishna Joshi</a> - check out <a href="https://medium.com/@govindkrjoshi?source=rss-eca2adc9cc56------2">Stories by Govind Krishna Joshi on Medium</a></i>
  </span>
</div></p>
</div>


  <footer>
    <p class="meta">
      
<span class="byline author vcard">Posted by <span class="fn">Govind Krishna Joshi</span></span>

      









<time datetime="2020-01-02T00:00:00+05:30" pubdate data-updated="true"></time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://blog.nilenso.com/blog/2020/01/02/offline-first-apps-are-appropriate-for-many-clini/" data-via="nilenso" data-counturl="http://blog.nilenso.com/blog/2020/01/02/offline-first-apps-are-appropriate-for-many-clini/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2019/10/04/training-the-simple-way/" title="Previous Post: Training, the Simple way">&laquo; Training, the Simple way</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>A little something about me.</p>
</section>
Included file 'custom/asides/subscribe.html' not found in _includes directory<section>
  <h1>Popular Posts</h1>
  <ul id="recent_posts">
    
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2020/01/02/offline-first-apps-are-appropriate-for-many-clini/">Offline-first apps are appropriate for many clinical environments</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/10/04/training-the-simple-way/">Training, the Simple way</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/09/04/from-wings-to-cups/">From wings to cups</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/02/01/india-has-a-three-body-problem/">India has a Three-Body Problem</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/08/13/fast-sudoku-solver-in-haskell-3-picking-the-right/">Fast Sudoku Solver in Haskell #3: Picking the Right Data Structures</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/nilenso">@nilenso</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'nilenso',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section id="twitter">
  <h1 class="tweets">Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("nilenso", , );
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <p>Follow <a href="http://twitter.com/nilenso">@nilenso</a></p>
  
</section>





  
</aside>


    </div>
  </div>
  <div class="sidebar">
    <p class="sidebar-content">
      <a href="http://nilenso.com">nilenso</a> is an employee-owned software cooperative based out of Bangalore, India.
    </p>
    <p class="sidebar-content">
      We practice test driven development and continuous delivery, and love working with Clojure and Ruby on Rails.
    </p>
    <p class="sidebar-content">
      This blog is a showcase of our growth as a consultancy, a product company and generally curious beings.
      Get in touch with us at <a href="mailto:hello@nilenso.com">hello@nilenso.com</a>.
    </p>
  </div>
</body>
<div class="footer">
  <div class="section-content contact-info">
    <p class="contact-phone-number">
      <a class="contact-link email-link" href="mailto:hello@nilenso.com">hello@nilenso.com</a>
      <a class="contact-link contact-social-link" href="http://twitter.com/nilenso">@nilenso</a>
      <a class="contact-link contact-social-link" href="http://github.com/nilenso">github.com/nilenso</a>
      <a class="contact-link" href="tel:+918040937123">+91 80 4093 7123</a>
     </p>
    <p class="contact-address">Nilenso Software LLP, #105, 10th Cross, Indiranagar Stage 1, Bangalore, India, 560038</p>
  </div>
</div>









  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</html>
